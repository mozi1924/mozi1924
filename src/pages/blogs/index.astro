---
import Layout from "../../layouts/Layout.astro";
import ArticleList from "../../components/blog/ArticleList.astro";
import SectionHeader from "../../components/ui/SectionHeader.astro";
import { getArticleList } from "../../utils/article";
import { SITE } from "../../config";

const items = await getArticleList("blog");

const listItems = items.map((item) => {
  const isSeries = item.type === "series";
  const data = isSeries ? item.metadata.data : item.article.data;
  const slug = isSeries ? `/blogs/${item.slug}` : `/blogs/${item.article.slug}`;

  return {
    name: data.title,
    url: new URL(slug, SITE.url).href,
    image: data.image,
    description: data.desc,
  };
});
---

<Layout
  title="Blogs"
  description="Explore Mozi's blog for the latest thoughts, detailed Blender tutorials, Minecraft rigging guides, and life updates."
  items={listItems}
  pageType="blog"
>
  <div class="max-w-7xl mx-auto px-6 py-24 min-h-screen">
    <SectionHeader title="My Blogs">
      <p class="text-xl text-gray-400 max-w-2xl mx-auto">
        Thoughts, tutorials, and life updates.
      </p>
    </SectionHeader>

    <ArticleList items={items} />
  </div>
</Layout>
